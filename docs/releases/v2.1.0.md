# Release v2.1.0

**Release Date:** January 14, 2025

## ğŸ–¥ï¸ Server Components Support

The major feature of this release is full Next.js App Router Server Components support.

### What's New

#### Server-Side Translation Functions

New utilities for Server Components:

```tsx
// Server Component
import { createServerI18n } from "i18nexus/server";

export default async function Page() {
  const { t, language } = await createServerI18n();

  return <h1>{t("Welcome")}</h1>;
}
```

#### Zero Hydration Mismatch

Server and client always in sync:

```tsx
// app/layout.tsx
import { headers } from "next/headers";
import { getServerLanguage } from "i18nexus/server";

export default async function RootLayout({ children }) {
  const headersList = await headers();
  const language = getServerLanguage(headersList);

  return <I18nProvider initialLanguage={language}>{children}</I18nProvider>;
}
```

### New Functions

#### `createServerI18n()`

All-in-one server i18n setup:

```typescript
const { language, t, translations, dict } = await createServerI18n({
  localesDir: "./locales",
  defaultLanguage: "en",
});
```

#### `createServerTranslation()`

Create translation function:

```typescript
import { createServerTranslation } from "i18nexus/server";

const t = createServerTranslation(language, translations);
```

#### `getServerTranslations()`

Get raw translations object:

```typescript
import { getServerTranslations } from "i18nexus/server";

const dict = getServerTranslations(language, translations);
```

#### `getServerLanguage()`

Read language from headers:

```typescript
import { getServerLanguage } from "i18nexus/server";

const language = getServerLanguage(headers, {
  cookieName: "i18n-language",
  defaultLanguage: "en",
});
```

#### `loadTranslations()`

Load translations from directory:

```typescript
import { loadTranslations } from "i18nexus/server";

const translations = await loadTranslations("./locales");
```

### Package Exports

New server export:

```json
{
  "exports": {
    ".": "./dist/index.js",
    "./server": "./dist/utils/server.js"
  }
}
```

Usage:

```typescript
import { createServerI18n } from "i18nexus/server";
```

### Documentation

- ğŸ“– Updated: README with Server Components guide
- ğŸ“ New: Server vs Client comparison table
- ğŸ’¡ New: Server Component examples

---

## ğŸ› ï¸ CLI Improvements

### What's New

#### Centralized Configuration

New `i18nexus.config.json` for project-wide settings:

```json
{
  "languages": ["en", "ko"],
  "defaultLanguage": "en",
  "localesDir": "./locales",
  "sourcePattern": "app/**/*.{ts,tsx}"
}
```

#### `i18n-sheets init`

Initialize projects with config:

```bash
npx i18n-sheets init
```

#### Config-Based Commands

CLI tools now read from config:

```bash
npx i18n-extractor  # Uses config
npx i18n-wrapper    # Uses config
npx i18n-sheets upload  # Uses config
```

### Documentation

- ğŸ“ Updated: README with CLI improvements
- ğŸ’¡ Added: Configuration examples

---

## ğŸ“ Demo Application

### What's New

#### `/getting-started` Page

Complete step-by-step guide in the demo app.

#### `/server-example` Page

Live Server Component examples.

#### Comprehensive Examples

Both Client and Server Component patterns.

---

## Breaking Changes

**None!** Fully backward compatible.

### Why No Breaking Changes?

- Server utilities are new additions
- Client-side API unchanged
- Optional config file
- All CLI tools maintain backward compatibility

---

## Migration from v2.0.6

### Enable Server Components

**Before:**

```tsx
// Client Component only
"use client";
import { useTranslation } from "i18nexus";

export default function Page() {
  const { t } = useTranslation();
  return <h1>{t("Welcome")}</h1>;
}
```

**After:**

```tsx
// Server Component (no "use client")
import { createServerI18n } from "i18nexus/server";

export default async function Page() {
  const { t } = await createServerI18n();
  return <h1>{t("Welcome")}</h1>;
}
```

### Fix Hydration Issues

**Before:**

```tsx
// âŒ Causes hydration mismatch
export default function Layout({ children }) {
  return <I18nProvider>{children}</I18nProvider>;
}
```

**After:**

```tsx
// âœ… Server-side language detection
import { headers } from "next/headers";
import { getServerLanguage } from "i18nexus/server";

export default async function Layout({ children }) {
  const headersList = await headers();
  const language = getServerLanguage(headersList);

  return <I18nProvider initialLanguage={language}>{children}</I18nProvider>;
}
```

---

## Performance Benefits

### Server Components

- âœ… Smaller JavaScript bundle (no Context/hooks sent to client)
- âœ… Faster initial page load
- âœ… Better SEO (fully rendered HTML)
- âœ… Zero hydration mismatch

### Bundle Size Comparison

```
Client Component:  ~15KB (with React Context)
Server Component:  ~2KB (minimal utils only)
```

---

## Full Changelog

See [CHANGELOG.md](../CHANGELOG.md) for complete details.

## Links

- ğŸ“¦ [npm Package](https://www.npmjs.com/package/i18nexus)
- ğŸ™ [GitHub](https://github.com/manNomi/i18nexus)
- ğŸ“– [Documentation](../../README.md)
